<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../css/public.css">
    <script>
        proc1 = () => {
            
            //0.5초 후에 id가 result인 요소의 배경색을 변경

            let res1 = document.getElementById('result1');

            window.setTimeout(function(){

                res1.style.background ='red';
            }, 500);
        }
        proc2 = (target) => {  //target은 버튼 클릭시 this를 전달받은 객체
            let res2 = document.getElementById('result2');

            //확인버튼을 검색해서 사용할수 없도록 설정 -종료버튼을 클릭시 다시 사용할수있도록

            // v1 = document.querySelector('input[value=확인]');

            target.style.display = "none";
            a= window.setInterval(function(){
                
                cr = parseInt(Math.random()*256);
                cg = parseInt(Math.random()*256);
                cb = parseInt(Math.random()*256);
                res2.style.background = `rgb(${cr},${cg},${cb})`;
                gtarget = target;
            }, 500);
        }
        proc3 = () => {            
                window.clearInterval(a);

                //확인 버튼을 검색 = 사용가능하도록설정
                // target.style.display="inline";

                //target변수는 지역변수, proc3()에서 사용불가
                //target릉ㄹ 전역변수로 전환
                gtarget.style.display = "inline";
        };
        
        proc4 = (but) => {            
                //id가 result4인 요소를 검색
                let res4 =  document.getElementById('result4');

                but.style.display = "none";
                gbut = but;

                //change이름을 이용하여 반복적으로 호출한다
                timerId = setTimeout(function change(){

                let cr = parseInt(Math.random()*256);
                let cg = parseInt(Math.random()*256);
                let cb = parseInt(Math.random()*256);
                
                //result4인 요소의 배경색을 바꿔라
                // res4.style.background = `rgb(${cr},${cg},${cb})`;
                
                
                //16진수로 변환
                cr16 = cr.toString(16);
                cg16 = cg.toString(16);
                cb16 = cb.toString(16);
                res4.style.background = "#" + cr16 + cg16 + cb16;

                //참조형으로
                timerId = setTimeout(change, 500);
                }, 500)
        };

        proc5 = () => {
            //확인 버튼을 사용가능하도록 다시 설정
            gbut.style.display = "inline";
            clearTimeout(timerId);
        }
    </script>
</head>
<body>
    <div class="box">
        <h3>1. setTimeout(fn(){}, milli)<br>
            milli 시간이 경과하면 fn을 수행하고 종료한다.
         </h3>
        <input type="button" value="확인" onclick="proc1()">
        <br>
        <div id="result1"></div>
    </div>

    <div class="box">
        <h3>2. 변수 = setInterval(fn(){}, milli)<br>
            milli 시간이 경과하면 fn을 수행하고 종료한다.
         </h3>
        <input type="button" value="확인" onclick="proc2(this)">
        <input type="button" value="종료" onclick="proc3()">
        <br>
        <div id="result2"></div>
    </div>

    <div class="box">
        <h3>3. 변수 = setTimeOut(fn(){}, milli)<br>
            중첩 setTimeOut을 이용해서 setInterval처럼 반복적으로 수행한다<br>
            종료하기위해서 clearTimeout() 함수가 필요하다
         </h3>
        <input type="button" value="확인" onclick="proc4(this)">
        <input type="button" value="종료" onclick="proc5()">
        <br>
        <div id="result4"></div>
    </div>
</body>
</html>